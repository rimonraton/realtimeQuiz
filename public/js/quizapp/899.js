"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[899],{8899:function(t,e,s){s.r(e),s.d(e,{default:function(){return c}});function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function r(t,e,s){return(e=function(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var n=s.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var a={props:["id","uid","user","questions"],data:function(){return{qt:{ms:0,time:30,timer:null},users:[],answered:0,answered_user:0,answered_user_data:[],results:[],counter:3,timer:null,current:0,qid:0,screen:{waiting:1,loading:0,result:0,winner:0},gamedata:{},score:[],user_ranking:null,game_start:0,progress:100}},created:function(){var t=this;Echo.channel(this.channel).listen("GameStartEvent",(function(e){console.log("GameStartEvent............."),t.game_start=1,t.screen.waiting=0,t.QuestionTimer()})).listen("QuestionClickedEvent",(function(e){console.log("QuestionClickedEvent............."),t.answered_user_data.push(e),t.answered_user++,t.loadingScreen()})).listen("KickUserEvent",(function(e){console.log("KickUserEvent............."),t.users=t.users.filter((function(t){return t.id!==e.uid})),t.user.id==e.uid&&(window.location.href="http://quiz.erendevu.net")}))},mounted:function(){var t=this;Echo.join("game.".concat(this.id,".").concat(this.uid)).here((function(e){t.users=e})).joining((function(e){t.users.push(e),t.game_start&&t.kickUser(e.id)})).leaving((function(e){t.users=t.users.filter((function(t){return t.id!=e.id})),console.log("".concat(e.name," leaving"))})),this.current=this.questions[this.qid].id,this.externalJS()},beforeMount:function(){var t=this;window.addEventListener("beforeunload",this.preventNav),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("beforeunload",t.preventNav)}))},beforeRouteLeave:function(t,e,s){this.game_start&&!window.confirm("Do You Realy Want to Leave This Game?")||s()},methods:{preventNav:function(t){this.game_start&&(t.preventDefault(),t.returnValue="")},gameStart:function(){var t={channel:this.channel,gameStart:1};axios.post("/api/gameStart",t),this.game_start=1,this.screen.waiting=0,this.QuestionTimer()},gameReset:function(){},QuestionTimer:function(){var t=this,e=100/(10*this.qt.time);console.log("QuestionTimer started"),this.qt.timer=setInterval((function(){0==t.qt.time?(t.answered||t.checkAnswer(t.qid,"Not Answered",0),t.questionInit(),t.resultScreen()):(t.qt.ms++,t.progress-=e,10==t.qt.ms&&(t.qt.time--,t.qt.ms=0))}),100)},checkAnswer:function(t,e,s){this.answered=1,this.right_wrong=s,this.gamedata.uid=this.user.id,this.gamedata.channel=this.channel,this.gamedata.name=this.user.name,this.gamedata.question=this.questions[this.qid].question_text,this.gamedata.answer=this.getCorrectAnswertext(),this.gamedata.selected=e,this.gamedata.isCorrect=1==s?Math.floor(this.progress):0,axios.post("/api/questionClick",this.gamedata);var i=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},this.gamedata);this.answered_user_data.push(i),this.screen.loading=!0,this.answered_user++,this.loadingScreen()},getCorrectAnswertext:function(){return this.questions[this.qid].options.find((function(t){return 1==t.correct})).option},loadingScreen:function(){this.users.length==this.answered_user&&(this.screen.loading=!1,this.resultScreen())},resultScreen:function(){console.log("resultScreen"),this.getResult(),this.screen.result=!0,this.startTimer()},startTimer:function(){var t=this;console.log("startTimer"),this.screen.result=1,this.timer=setInterval((function(){t.countDown()}),1e3)},countDown:function(){if(console.log("countDown"),0==this.counter){if(this.questionInit(),this.qid+1==this.questions.length)return void this.winner();this.qid++,this.current=this.questions[this.qid].id,this.QuestionTimer()}this.counter--},getResult:function(){var t=this;console.log("getResult"),this.results=[],this.users.forEach((function(e){var s=0;t.answered_user_data.filter((function(t){return t.uid===e.id})).map((function(t){s+=t.isCorrect})),t.results.push({id:e.id,name:e.name,score:s})})),this.results.sort((function(t,e){return e.score-t.score}))},winner:function(){var t=this;if(this.user_ranking=this.results.findIndex((function(e){return e.id==t.user.id})),this.questionInit(),this.screen.result=1,this.screen.winner=1,this.game_start=0,0==this.user_ranking)confetti({zIndex:999999,particleCount:200,spread:120,origin:{y:.6}});else{var e=["#bb0000","#ffffff"];confetti({zIndex:999999,particleCount:100,angle:60,spread:55,origin:{x:0},colors:e}),confetti({zIndex:999999,particleCount:100,angle:120,spread:55,origin:{x:1},colors:e})}},getAvatarAlt:function(t){return t.substring(0,2)},externalJS:function(){var t=document.createElement("script");t.setAttribute("src","https://cdn.jsdelivr.net/npm/canvas-confetti@1.3.0/dist/confetti.browser.min.js"),document.head.appendChild(t)},kickUser:function(t){if(t!=this.uid){this.users=this.users.filter((function(e){return e.id!==t}));var e={channel:this.channel,uid:t};axios.post("/api/kickUser",e)}},questionInit:function(){clearInterval(this.timer),clearInterval(this.qt.timer),this.qt.ms=0,this.qt.time=30,this.progress=100,this.answered=0,this.answered_user=0,this.counter=3,this.screen.waiting=0,this.screen.loading=0,this.screen.result=0,this.screen.winner=0},gameStarted:function(t){console.log(["user",t])}},computed:{channel:function(){return"game.".concat(this.id,".").concat(this.uid)},progressClass:function(){return this.progress>66?"bg-success":this.progress>33?"bg-info":"bg-danger"},progressWidth:function(){return{width:this.progress+"%"}}}},o=a,c=(0,s(1900).Z)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t.screen.waiting?s("div",{staticClass:"waiting"},[s("div",{staticClass:"card",staticStyle:{width:"24rem"}},[s("div",{staticClass:"card-header"},[t._v("Player Joined.\n                "),t.user.id!=t.uid?s("code",{staticClass:"ml-2"},[t._v("Please Wait until Game Start..")]):t._e()]),t._v(" "),s("div",{staticClass:"card-body",staticStyle:{"max-height":"90vh",overflow:"auto"}},[s("ul",{staticClass:"list-group"},t._l(t.users,(function(e){return s("li",{key:e.id,staticClass:"list-group-item",class:{active:e.id==t.user.id}},[s("img",{staticClass:"circle mr-2",attrs:{src:e.avatar,alt:t.getAvatarAlt(e.name)}}),t._v(" "),s("span",{staticClass:"ml-5"},[t._v(t._s(e.name))]),t._v(" "),e.id!=t.user.id&&t.user.id==t.uid?s("button",{staticClass:"float-right btn btn-sm btn-outline-danger",on:{click:function(s){return t.kickUser(e.id)}}},[t._v("\n                            Kick\n                        ")]):t._e()])})),0),t._v(" "),t.user.id==t.uid?s("a",{staticClass:"btn btn-sm btn-outline-danger mt-4",on:{click:t.gameReset}},[t._v("RESET")]):t._e(),t._v(" "),t.user.id==t.uid?s("a",{staticClass:"btn btn-sm btn-outline-success mt-4 pull-right",on:{click:t.gameStart}},[t._v("START")]):t._e()]),t._v(" "),s("div",{staticClass:"card-footer"},[t.user.id==t.uid?s("div",{staticClass:"sharethis-inline-share-buttons"}):t._e()])])]):t._e(),t._v(" "),t.screen.loading?s("div",{staticClass:"loading"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-md-8"},[s("h2",{staticClass:"text-center"},[t._v("Waiting for other user response.")]),t._v(" "),s("div",{staticClass:"progress m-2"},[s("div",{staticClass:"progress-bar progress-bar-striped",class:t.progressClass,style:t.progressWidth},[t._v(" "+t._s(Math.floor(t.progress))+"\n                    ")])]),t._v(" "),s("img",{staticClass:"m-2",attrs:{src:"/images/loading/bar.svg"}})])])]):t._e(),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.screen.result?s("div",{staticClass:"result"},[s("div",{staticClass:"card",staticStyle:{width:"24rem"}},[s("div",{staticClass:"card-header"},[t._v("Results")]),t._v(" "),s("div",{staticClass:"card-body"},[s("ul",{staticClass:"list-group"},t._l(t.results,(function(e,i){return s("li",{key:i,staticClass:"list-group-item"},[t._v("\n                        "+t._s(e.name+" : "+e.score)+"\n                    ")])})),0),t._v(" "),t.counter?s("div",{staticClass:"mt-5",attrs:{id:"counter"}},[s("h1",{staticClass:"text-center",staticStyle:{color:"#1BAA8F",height:"4rem"}},[t._v("\n                        "+t._s(t.counter)+"\n                    ")])]):t._e(),t._v(" "),s("h1")]),t._v(" "),t.qid+1==t.questions.length?s("div",{staticClass:"card-footer"},[s("a",{staticClass:"btn btn-sm btn-secondary text-center",attrs:{href:"http://quiz.erendevu.net/"}},[t._v("Game List")])]):t._e()])]):t._e()]),t._v(" "),t.screen.winner?s("div",{staticClass:"winner"},[0==t.user_ranking?s("div",[s("h1",{staticClass:"text-center"},[t._v("Congratulation ! ")]),t._v(" "),s("h3",[s("b",[t._v(t._s(t.user.name))]),t._v(", you won this game.")])]):1==t.user_ranking?s("div",[s("h1",{staticClass:"text-center"},[t._v("Well Played ! ")]),t._v(" "),s("h3",[s("b",[t._v(t._s(t.user.name))]),t._v(", you got second place")])]):s("div",[s("h3",{staticClass:"text-center"},[s("b",[t._v(t._s(t.user.name))]),t._v(", you need more concentration ")])]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-secondary",on:{click:function(e){t.screen.winner=0}}},[t._v("Close")])]):t._e(),t._v(" "),s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-md-8"},[s("div",{staticClass:"progress"},[s("div",{staticClass:"progress-bar progress-bar-striped",class:t.progressClass,style:t.progressWidth},[t._v(" "+t._s(Math.floor(t.progress))+"\n                ")])]),t._v(" "),t._l(t.questions,(function(e){return e.id==t.current?s("div",{staticClass:"card my-4"},[s("div",{staticClass:"card-body"},[s("span",{staticClass:"q_num text-right text-muted"},[t._v("Question "+t._s(t.qid+1)+" of "+t._s(t.questions.length))]),t._v(" "),s("p",{staticClass:"mb-2",domProps:{innerHTML:t._s(e.question_text)}}),t._v(" "),t._l(e.options,(function(i){return s("ul",{staticClass:"list-group"},[s("li",{staticClass:"list-group-item list-group-item-action cursor my-1",on:{click:function(s){return t.checkAnswer(e.id,i.option,i.correct)}}},[s("span",{domProps:{innerHTML:t._s(i.option)}})])])}))],2)]):t._e()}))],2),t._v(" "),s("div",{staticClass:"col-md-4"},[s("div",{staticClass:"card my-4"},[s("div",{staticClass:"card-header"},[t._v("User List")]),t._v(" "),s("div",{staticClass:"card-body"},[s("ul",{staticClass:"list-group"},t._l(t.users,(function(e){return s("li",{key:e.id,staticClass:"list-group-item user-list",class:{active:e.id==t.user.id}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])})),0)])])])])],1)}),[],!1,null,null,null).exports},1900:function(t,e,s){function i(t,e,s,i,n,r,a,o){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=s,u._compiled=!0),i&&(u.functional=!0),r&&(u._scopeId="data-v-"+r),a?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=c):n&&(c=o?function(){n.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:n),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:u}}s.d(e,{Z:function(){return i}})}}]);